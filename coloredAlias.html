<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <style>
        body {
            padding: 50px;
            overflow-y: hidden;
        }
    </style>
</head>
<body>
<div class="cardinal-curve"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.6.0/d3.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
<script type="text/javascript">

    const object ={
        "result":0,
        "sentence":" it's easy to tell the depths of a well ",
        "stress":["It'\u02ca","\u02caasy","to","tell","the","depth","of","a","well"],
        "comment":"easy \ub2e8\uc5b4\uc758 1\ubc88\uc9f8 \uc74c\uc5d0 \uac15\uc138\uac00 \uc788\uc2b5\ub2c8\ub2e4.\ntell \ubc1c\uc131\ud560 \ub54c, l \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nthe \ubc1c\uc131\ud560 \ub54c, \u00f0 \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nof \ubc1c\uc131\ud560 \ub54c, v \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nwell \ubc1c\uc131\ud560 \ub54c, l \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\n1",
        "Acute":[4,1,0,0,0,0,0,0,0],
        "Grave":[0,0,0,0,0,0,0,0,0],
        "intonation":"0.016720521434664|3.0091914734526|3.5817877364452|3.2225516138749|2.4530124049152|1.9525394757512|1.8858177732541|2.0991810905756|2.0307188653998|1.6743639729216|2.1527807452175|3.5481323364911|4.1228720031265|3.399380090246|2.9525670932036|6.8936599912521|17.2663199186|31.491971112679|44.879668141538|53.057863230936|53.938596649602|47.857493739316|36.948760066901|25.55052038845|17.496447063507|13.783190114033|13.962067155249|16.838362620138|20.07935807271|20.40092451582|18.015642595901|16.504404866122|25.199957200348|42.800603242772|57.557217755187|65.373228425913|69.630539306997|72.761215952763|74.318999350483|73.349968703841|69.550403215048|62.957831208279|53.456420920162|41.600620427254|30.084977122654|21.827286471041|18.082140193249|18.730519377156|21.847407545243|27.504244446262|35.119617253473|42.193918785848|46.37136152134|46.521085664614|42.359389463463|33.966416316703|23.442281975339|14.794484269636|11.550472602203|14.421147681178|16.722445515227|16.567223279934|20.506887894321|28.102821423312|32.184739167747|29.614174691894|22.911304645205|16.132429495314|10.645100659177|6.7421718831283|4.8500902179728|4.8651903703957|9.6094775262271|15.923914159419|17.982489497131|20.994226402444|36.099375987314|55.093445009188|71.919998627299|85.329598268477|94.145571530546|99.014703613386|100|96.039462841016|89.258512072476|81.818178712725|74.071286397157|66.061696481203|57.266396588879|48.222493626271|40.766148544709|34.186112397754|27.841963498296|22.748345005338|18.923429868409|16.639866053481|18.342133901394|24.561213735254|30.248226796686|30.881610130782|25.618274867394|18.321024393567|13.974937810065|12.072574345148|10.307416703518|11.428778122402|22.800786563225|41.233446220412|57.497592191826|66.6192909586|68.604068017691|65.222842083108|57.869488808977|46.800440298615|32.726519944469|19.635854819283|11.444579851184|7.3730951937881|5.8016270190641|4.8222514861333|4.071924958887|3.921026800921|4.4432396517313|5.4362556690048|6.1277315120142|6.4276137964165|6.3936652355601|5.641567687404|4.6152988668914|4.1595833960627|5.4670099247258|11.27846272477|19.169016473024|23.92488133591|23.52067884881|20.613410724748|17.844309536266|15.701810992102|14.354887013619|13.800659029287|14.275777227275|16.542452329044|22.387201556167|30.440370635311|36.885009467299|40.616247665523|42.029057604681|41.481049085825|39.884113366567|37.458437024456|34.158587877953|30.384353059506|27.255238194045|26.199914006392|27.586701012176|31.68836903653|38.198819539915|45.237609677736|50.309483266332|51.790463958536|50.535891315817|48.887725156203|48.272500826721|48.355933101942|48.228042715881|46.827373747983|43.752208982573|40.471554626826|38.137300176854|35.805499580447|33.002719516399|29.373092746238|24.606495582582|20.646662257228|18.625152219008|17.050994932983|15.337331932669|13.757825751838|12.463783883539|10.830533465717|7.9149813766774|5.1796423653991|3.4641748195298|2.6151688410942|2.4589502466487|2.3415302845506|2.6230090099923|2.8903464213126|2.6257279339827|2.5879134882475|2.8697884566061|3.5314234023778|4.215020853377|3.9842795971591|3.5420104686987|4.2198774124303|4.411636528578|3.2445150052901|2.3678259965106|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|",
        "pitch":"0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|87.24460060403|78.358100356075|75.442006899265|72.356825648825|68.591267324017|64.898177209429|58.463444601243|58.236653585087|0|0|0|0|0|0|0|99.916792030951|95.882169399613|94.634139775646|94.781091829944|97.138921806584|98.915016635958|99.619551122366|100|99.920825982599|99.350486144852|97.047001790264|91.800582633594|86.286440466026|81.659336889742|81.72778054208|84.158083425824|90.008382862861|89.914445870716|90.185527824054|90.975276519602|90.1741217788|88.505386962649|85.710735445748|81.035998093441|73.171402739721|64.521081906369|0|0|0|0|77.335525820498|76.514908537863|71.297346360322|67.376118566079|59.56855612256|55.829167488733|55.384304213526|0|0|0|0|0|0|0|89.892975746825|84.135267309417|83.387122262901|83.884318881221|85.140400975867|85.508097144749|85.583922955442|84.580130584624|82.928171022158|80.672996123783|78.449355427937|75.24138557409|72.200485196082|68.774447780066|66.164323382714|64.159425929227|61.979400490371|59.789981956185|57.51668983751|56.646421803028|57.782396543566|64.358034975461|64.485523816942|62.519542724339|61.984765672902|53.861845100497|53.322373849837|52.470892676998|53.692082297659|57.095983974342|0|0|71.934778490025|70.222427745901|70.143254399483|71.672424687559|72.842616892874|72.360854232607|64.730431382415|66.585029245881|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|82.999291897895|68.614084111408|68.19337824824|65.341699189004|63.11738750985|60.980307686643|59.992620257185|61.507026899533|63.566274671956|65.241050350829|66.564229434315|67.260035769852|67.530442042998|67.078201977302|66.24819629622|65.638940097589|65.027676987884|64.258728103902|63.147581087729|62.153181812241|61.535878510796|61.818361141521|62.629579289977|63.778977051593|65.853654756167|67.302980714517|67.439863322311|66.868852501255|66.479015225175|65.959672802773|65.394703515424|63.944040958324|62.959035449149|61.676784334504|60.987684477131|59.841644986972|58.480219854928|56.7551224409|55.580231339478|54.82269252665|53.255276190015|51.938803584693|51.179923476232|50.688091369461|57.336867652917|55.054182438912|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|","n_location":" 19 41 60 78 95 114 134 144 167",
        "startPoint":" 10 28 54 66 91 99 129 140 148",
        "cutPoint":3,
        "endPoint":" 28 54 66 91 99 129 140 148 186",
        "criwords":",0,0,0,0,0,0,0,0,0"
    }

    var object1 ={"result":0,"sentence":" glue the sheet to the dark blue background <sil>","stress":["Glue","the","sheet","to","the","dark","blue","\u02caack\u02cbround"],"comment":"glue \ubc1c\uc131\ud560 \ub54c, l \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nthe \ubc1c\uc131\ud560 \ub54c, \u00f0 \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nthe \ubc1c\uc131\ud560 \ub54c, \u00f0 \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nblue \ubc1c\uc131\ud560 \ub54c, l \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nblue \ubc1c\uc131\ud560 \ub54c, b \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nbackground \ubc1c\uc131\ud560 \ub54c, r \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nbackground \ubc1c\uc131\ud560 \ub54c, b \ubc1c\uc74c\uc5d0 \uc720\uc758\ud558\uc138\uc694.\nbackground \ub2e8\uc5b4\uc758 1\ubc88\uc9f8 \uc74c\uc5d0 \uccab\uc9f8 \uac15\uc138\uac00, 5\ubc88\uc9f8 \uc74c\uc5d0 \ub458\uc9f8 \uac15\uc138\uac00 \uc788\uc2b5\ub2c8\ub2e4.\n1","Acute":[0,0,0,0,0,0,0,1],"Grave":[0,0,0,0,0,0,0,5],"intonation":"2.4007675501735|2.5115974118299|2.570691783028|2.4817042389557|2.4121257282424|2.806080274117|3.7359417200446|4.2096891673761|3.449054689846|2.4330440814958|2.2863890000537|2.0994235691477|2.8356333242164|7.3290911946182|15.445431610698|28.493779617134|44.207930328044|56.630428843261|63.613597591583|68.241723650798|75.945147594227|88.470778809932|97.757496286757|98.412440758617|95.631281509678|94.765412323296|96.41618266914|98.878079216406|100|97.858871771367|91.033220125768|77.947093665255|58.857279758371|40.40637501022|29.170923621225|23.999379012353|24.296858114409|32.389184177118|46.041559385872|59.559360693843|67.127442404868|65.290478808602|54.733090280533|39.382194377745|27.758756132816|27.270935435321|29.2381582289|29.614200693872|31.250009851312|32.184739160804|32.764227506358|33.535138686087|30.771596177074|24.56971527168|18.426807379723|19.658487913284|35.160082137552|53.155729085906|63.82633740086|67.670609081991|68.076964574279|65.682541847927|60.603830691396|53.542651576083|45.352391094983|36.889253920437|27.71723966633|17.556987380746|9.1169614994928|4.5201206977635|2.856603919861|2.4705858578404|2.1694520685304|1.990673242871|2.2143687230232|2.3149947919909|2.522900374215|3.1052741815904|3.8895558929501|4.7978880378557|7.7740975560824|11.551811883555|12.579112503139|13.502061609436|21.23733369293|31.322036457989|36.821368873102|34.245228394728|26.233119958279|20.056266842978|17.388015367621|15.938593308331|15.8836405512|19.47825370654|28.81376880544|40.049776564957|47.369642471981|47.287911914097|39.120102016913|27.51376467302|19.184479454648|14.079914133355|9.6660734665358|6.0290651546865|5.8694861556874|14.349938892044|32.745382668935|55.309551941992|70.210177369239|73.92647058731|72.794776956031|72.568842896711|75.119029668869|78.333925406167|79.808659870783|79.873038767803|80.158599180548|80.343352773677|78.415158457425|73.561403913099|65.841563801485|54.450272939908|40.008287587746|25.804773885085|14.601588356394|8.5447614600241|6.0534083213758|5.0681563693972|6.0750530153333|6.8857292645679|6.3496533428677|4.6795055389371|3.6779008246917|5.2468656054189|11.859051356411|24.55274751213|38.699013130559|47.342355545048|49.215300759934|49.169974338306|50.751637339974|52.716934680394|53.223099023992|52.179501259129|50.466115561791|49.18129123686|47.774921449967|45.29498393048|42.101735933397|38.587815675094|33.903939760977|26.89056657436|19.233130911123|13.126530386607|8.0881663535128|4.190346969255|2.7954391520534|4.6505049922553|9.4787265056525|17.866933388882|33.254483312185|48.70235617845|55.699332532403|55.917816086147|55.106125232762|55.296824918419|54.2875212189|49.865486905785|42.461944448285|33.06739812873|22.261273762327|11.473608106623|4.0220738075596|2.0622918700368|2.3147284360562|2.6040540039047|2.9559703525415|3.3903924858032|4.2223096449267|5.7438104073569|6.2466921083281|5.0553361340162|4.6553255567561|6.4706824734303|12.645909617269|22.431075926019|31.521001386095|38.027683336142|42.24253468656|44.299627070591|44.704391650729|43.161862213125|39.527575503669|34.809676057345|30.587918660461|26.999140874423|23.823197202659|21.186050124694|19.520910421585|19.00421710195|18.194916447411|17.072612984653|16.371937376801|15.56682662041|14.635249256361|14.728209338129|15.146069648354|15.034880857392|14.809826308943|14.264283259697|13.039172024423|10.701632542895|7.4713678018507|5.6091884596262|6.6320856147505|7.1039506943024|5.8701615673564|4.4647804640694|5.0350066203687|5.9101698266523|4.9488007647367|3.367829099181|2.6263345811576|2.446808437577|2.5721723367733|2.6859630687865|2.5494710295087|2.8707805238618|3.8251634245835|4.052751163534|3.5493604640694|3.0154358198316|2.5124645552636|2.6770104667749|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|","pitch":"0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|73.504173013829|72.384272753395|73.601082207968|76.654666200385|81.991697427163|84.927185833849|87.89092597155|90.219938837098|92.623396082434|94.783620562688|97.316724764841|99.269656075591|99.964061046201|100|99.517383215455|98.074018251705|95.246348631752|91.920011347157|90.33160572767|91.024081512132|94.032741010078|99.02834286998|97.082471764426|96.110177990141|95.635267681734|93.957650359347|89.286149847025|84.519659700035|0|0|0|0|0|0|0|0|0|0|0|0|96.231480542999|88.998634365964|84.760326634704|79.914902225592|77.47357619853|75.278689903677|73.562576781978|72.457434217977|70.578306150303|67.77244929775|64.815778991921|48.462619300445|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|80.288412815749|76.718201629359|72.167347772276|69.469314840683|66.373372184207|63.806258214404|61.108865777747|60.340011934898|61.326426761352|64.664961046195|68.44824269208|68.007984571594|67.56579726496|66.630084222966|65.393375784456|56.142138173998|55.175622331481|52.623270550561|52.571926987608|0|0|0|0|0|75.260720105889|75.458391732235|75.848589846752|76.412075213795|76.786232074894|76.471756762922|75.818427541164|75.368538250842|75.072679649379|74.767835507244|74.682477042412|75.249811155074|75.339018365525|74.178683492952|71.736716329176|0|0|0|0|0|0|0|0|0|0|0|0|0|77.432500449678|74.35838082906|71.872130307527|71.046164596635|71.526211058317|70.822821188812|71.37924635066|71.149488366805|70.535305707751|69.833845666173|68.335288393851|67.193564455781|66.083290872733|65.100082371628|64.174642277963|61.111431608159|55.082566375411|53.159154949979|0|0|0|0|0|0|0|0|68.360318396835|67.807747114835|67.751913669549|67.843045573698|67.929045175244|67.461186087133|65.148218967454|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|61.729463012833|60.132076986901|58.741984772252|57.618872410463|56.970033071038|56.601012363214|55.087056257744|54.135939248375|53.492877840718|52.705417555816|51.656749573816|51.405814825046|51.475128185788|50.047813460355|50.107495009482|49.950904266217|49.17627698405|49.118519486843|48.921488997212|49.051130178022|49.302706705284|49.322600554993|48.826508989221|48.968342677831|48.851538992205|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|0.00000|","n_location":" 19 35 59 81 92 112 139 184","startPoint":" 10 29 42 76 87 97 128 150","cutPoint":5,"endPoint":" 29 42 76 87 97 128 150 219","criwords":",0,0,0,0,0,0,0,0"}



    function getArrayFromRawDataString(dataString) {
        const result = dataString.split(' ');
        result.shift();
        return result.map(Number);
    }

    function mergeArraysUniquely(){

        const startPoints = getArrayFromRawDataString(object.startPoint);
        const endPoints = getArrayFromRawDataString(object.endPoint);

        var mergedArray = startPoints.concat(endPoints);
        var mergedUniqArray = _.uniq(mergedArray);

        return mergedUniqArray;
    }

    const intonations = object.intonation.split('|').map(Number);
    const intonations1 = object1.intonation.split('|').map(Number);


    const svgWidth = window.innerWidth - 600;
    const svgHeight = window.innerHeight - 300;


    const svg = d3.select('.cardinal-curve')
        .append('svg')
        .attr('width', svgWidth)
        .attr('height', svgHeight)
        .attr('viewBox', '0 0 ' + svgWidth + ' ' + svgHeight);




    /* function drawLine(arry, color){
     var minIntonation = d3.min(arry);
     var maxIntonation = d3.max(arry);

     var xLinearScale = d3.scaleLinear()
     .domain([0, arry.length])
     .range([0, svgWidth]);

     var yLinearScale = d3.scaleLinear()
     .domain([minIntonation, maxIntonation])
     .range([svgHeight, svgHeight*0.5]);

     arry.forEach((value, idx) => {
     if (idx === arry.length - 1) {
     return;
     }

     //const color = idx % 8 < 4 ? 'red' : 'blue';
     svg.append('line')
     .attr('x1', xLinearScale(idx))
     .attr('x2', xLinearScale(idx+1))
     .attr('y1', yLinearScale(arry[idx]))
     .attr('y2', yLinearScale(arry[idx+1]))
     .attr('fill', 'none')
     .attr('stroke', color);
     });

     }  */


    function drawLine(arr, color){
        const minIntonation = d3.min(arr);
        const maxIntonation = d3.max(arr);

        const xLinearScale = d3.scaleLinear()
            .domain([0, arr.length])
            .range([0, svgWidth]);

        const yLinearScale = d3.scaleLinear()
            .domain([minIntonation, maxIntonation])
            .range([svgHeight, svgHeight*0.3]);

        var cardinalCurveLine = d3.line()
                .x((v, idx) => xLinearScale(idx))
    .y(v => yLinearScale(v))
    .curve(d3.curveCatmullRomOpen);  // https://github.com/d3/d3-shape/blob/master/README.md#curves

        svg.append('path')
            .datum(arry)
            .attr('d', cardinalCurveLine)
            .attr('fill', 'none')
            .attr('stroke', color);


    }





    drawLine(intonations, 'red');
    drawLine(intonations1, 'green');





</script>
</body>
</html>